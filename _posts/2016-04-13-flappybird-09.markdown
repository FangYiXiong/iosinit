---
layout: post
title: 「从零开始」做一个 FlappyBird 那样的游戏 第9节：主菜单
date: '2016-04-13 14:54:08'
tags:
- flappybird
---


原文地址：[第9节：主菜单](http://iOSinit.com/flappybird-09)

相关视频地址：[网易云课堂](http://study.163.com/course/introduction/1685005.htm)

嗨，大家好，我是方一雄。欢迎大家继续收看[「从零开始」做一个 FlappyBird 那样的游戏](http://study.163.com/course/introduction/1685005.htm) 这一系列教学视频。

在本节的视频中，你将会学习如何计算玩家的得分。

## 理论讲解（上）

### 「教程」界面

好，我们首先要给游戏增加一个「教程」界面。为什么要增加这样一个界面呢？

因为我们需要给第一次进入游戏的玩家一点”提示”来告诉他们怎么玩这个游戏。像我们这个图上显示的一样，有一个”Tap”（触碰）来告诉玩家我们这个游戏是靠点击屏幕的方式进行游戏的。

另外，这样做的目的还在于每一次玩家重新开始游戏的时候，有一个心理上的准备时间。而不是像我们现在的游戏这样，每次结束后一点击屏幕，马上就重新开始游戏。

在这个教程界面中，我们给玩家一些准备的时间。这样同时也解决了第 6 节课后我们遇到的那个，重新开始游戏后必须猛按屏幕才能防止直接摔向地面的那个 Bug。

### 如何添加「教程」界面

好，那我们来看一下如何添加这个「教程」界面。

第一步，新建一个「切换到教程状态」的方法来控制流程。所谓流程，就是我们希望什么时候出现这个界面啊？比如有的游戏可能选择只在玩家第一次打开这个游戏的时候才显示「教程」。那因为我们这里的教程还有一个给玩家准备时间的作用，所以我们在每次进入游戏的时候都显示这个「教程」。

第二步，在「设置教程状态」这个方法中搭建界面，也就是图中，这个教程的示意图面放在哪里，Ready 那个标志放在哪里啊，这些。

然后，最后一步，修改其他相关的代码来保证我们的逻辑是正确的。

就这样三步，好，我们来看一下代码怎么写。

## Demo 演示

详见视频

## 理论讲解（下）

### 「主菜单」

好，添加完「教程」界面之后，我们还剩下一个问题，就是添加「主菜单」。

那经过了刚刚「教程」界面的添加之后，大家应该已经了解添加一个界面的大概流程。

所以，我们这里同样是 3 个步骤。

首先，我们新建一个「切换到主菜单」的方法，在这个方法里我们「设置背景」啊，「设置主角」啊，等等，当然，这里还要有一个新方法，就是「设置主菜单」。

第二步，就是来实现「设置主菜单」这个方法，这里搭建界面，还有可能有一些动画特效，比如这里，我们希望给最下面那个「学习如何制作这个游戏」的按钮一个不断放大缩小的动画来更让它更醒目一些。

然后，最后一步，修改其他相关的代码来保证我们的逻辑是正确的。

这里的最后一步修改逻辑就要比刚才的「教程」复杂一些了，专门再说一下。

在修改逻辑这里，首先我们要修改「didMoveToView」这个方法，这个方法是在游戏刚开始的时候调用的，之前我们在这里写的是「切换到教程状态」，那这里我们就要修改成「切换到主菜单」了。

然后我们要修改「切换到教程状态」这个方法，为什么呢？因为我们现在需要在这里把主菜单的一些图片和动画去除掉，而且有一些重复的代码，比如「设置背景」什么的，也要去除掉，来保证程序的正确。

最后，我们要修改触摸的方法，touchesBegan。因为我们的主菜单上有不同的按钮，我们要判断一下用户点击是哪个”按钮”。我们这里的判断不需要太精细，比如，只要用户点击的是屏幕下方15%以内的位置，我们就认为它是点击了「学习制作这个游戏」这个按钮，然后如果用户点击了左边屏幕，我们就开始游戏，点击了右边，就跳到 AppStore去评论。


## 挑战时间

好，又到了我们喜闻乐见的「挑战时间」了。本期挑战的题目是：

起飞~~~~~

诶？谁把你放出来的？等会我先把她干掉啊！

好了，我们回到正常的世界里啊。这次挑战的原因呢，是这样的：

本来刚刚我录完视频正准备发布的时候，结果我们的主角跑过来跟我提了几个小小的意见。

我tmd翅膀是摆设嘛，飞的时候为啥一直不动呢，不动飞个P啊？为什么主菜单上的一个按钮都有动画，我堂堂一个男主角却没有动画特效？（明明加过很多了的说……）别以为我不会告诉别人，你这样做不就是为了在教程网页增加以后课程的广告嘛？（你这不是已经说了嘛...=。=）等等，有话好好说。你到底想要啥子嘛？

经过一番交涉之后，我把伟大的战无不胜的主角的愿望转达一下：

1. 像视频中这样，在教程状态下，要以每0.4秒50个像素的速度上下移动。
2. 飞的时候肯定要煽动翅膀啊，所以要再加上不停煽动翅膀的动画。
3. 总之，就是要「起飞」！

好，更多详情请参考屏幕下方给出的网址。

本期视频就到这里，希望您看的愉快。我们下期再见！



